<sly data-sly-template.banner_template="${@data, flag}">
    <sly data-sly-test.dataLinkSectionCTAText="${data.pwButtonTheme == 'link' ? 'Text Hyperlink' : 'CTA'}" />
    <sly data-sly-test.textImageBanner="${data.bannerType == 'textImage' || data.bannerType == 'textImage-wide'}" />
    <sly data-sly-test.cardTheme="${(data.pwCardTheme =='sky-blue' && data.pwDisplay =='display-row-reversed') || (data.pwCardTheme =='black' && data.pwDisplay =='display-row-reversed')}" />
    <sly data-sly-test.cardThemeReverse="${(data.pwCardTheme =='sky-blue' && data.pwDisplay =='display-row') || (data.pwCardTheme =='black' && data.pwDisplay =='display-row')}" />

    <div class="tp-container-${data.bannerType} pw-theme--${data.pwTheme}" id="${data.anchorId}" title="${data.anchorTitle}" data-module="Banner" auto_locator="${data.bannerType}">
        <div class="pw-banner"
            data-link-banner-title="${data.title}" data-anchor-type="${dataLinkSectionCTAText}"
            data-link-section="Hero Image_imageClick" data-link-name="${data.linkLabel}"
            data-asset-name="${data.assetName}" data-href="${data.formType ? '': data.link.linkUrl}">
                <sly data-sly-test="${wcmmode.edit}">
                    <div class="pw-banner__image-wrapper">
                        <img src="${data.fileReference}" alt="${data.alt}" class="cq-dd-image">
                    </div>
                </sly>
                <sly data-sly-test="${!wcmmode.edit}">
                    <div class="pw-banner__image-wrapper" auto_locator="bannerImage">
                        <sly data-sly-test="${textImageBanner}">
                            <sly data-sly-test.textImageBannerType="${data.bannerType == 'textImage' ? 'banner' : 'banner-wide'}" />
                            <sly data-sly-use.image="${'com.tetrapak.customerhub.core.models.DynamicImageModel' @ imagePath=data.fileReference , altText=data.alt, imageCrop=data.imageCrop}" />
                            <sly data-sly-test = "${data.fileReference}"  data-sly-use.dynamicMediaImage="/apps/customerhub/components/content/dynamicimage/dynamicimage.html" data-sly-call="${dynamicMediaImage.dynamicimage_template @image=image, className='img-responsive'}" />
                        </sly>
                    </div>
                </sly>
                <sly data-sly-test="${textImageBanner}">
                    <sly data-sly-test="${cardTheme || cardThemeReverse}">
                        <div class="pw-banner__bgcolor ${data.pwCardTheme} ${data.subtitle ? '' : 'no-subtitle'} ${cardTheme ? 'display-row-reversed-wrapper' : ''}">
                            <sly data-sly-call="${bannerCommon @ bannerData=data, dataLinkSectionCTAText=dataLinkSectionCTAText, textImageBanner=textImageBanner, cardTheme=cardTheme, cardThemeReverse=cardThemeReverse}"/>
                        </div>
                    </sly>
                     <sly data-sly-test="${data.pwCardTheme == null || data.pwCardTheme =='gray'}">
                        <div class="${data.subtitle ? '' : 'no-subtitle'}">
                            <sly data-sly-call="${bannerCommon @ bannerData=data, dataLinkSectionCTAText=dataLinkSectionCTAText, textImageBanner=textImageBanner, cardTheme=cardTheme, cardThemeReverse=cardThemeReverse}"/>
                        </div>
                    </sly>
                </sly>
        </div>
    </div>
</sly>


<sly data-sly-template.bannerCommon="${@bannerData, dataLinkSectionCTAText, textImageBanner, cardTheme, cardThemeReverse}">
    <div class="pw-banner__content banner-sibling ${bannerData.pwDisplay} ${bannerData.pwCardTheme}"></div>
    <div class="pw-banner__content banner-parent ${bannerData.pwDisplay}
        ${bannerData.pwCardTheme}">
        <div data-sly-test="${bannerData.subtitle}" class="pw-banner__content__subtitle ${bannerData.pwCardTheme}" auto_locator="bannerSubtitle">
            ${bannerData.subtitle @ context='html'}
        </div>
        <div data-sly-test="${bannerData.title}" class="pw-banner__content__title ${bannerData.pwCardTheme} ${bannerData.bannerType == 'hero-wide' ?  'hero-title' : ''}" auto_locator ="bannerHeadline">
            <sly data-sly-test="${bannerData.headingTag == 'h1'}"
                data-sly-use.title="/apps/commons/components/atoms/heading/heading.html" +
                data-sly-call="${title.heading_h1_template @ headingText=bannerData.title, variant='regular'}" />
            <sly data-sly-test="${bannerData.headingTag == 'h2'}"
                data-sly-use.title="/apps/commons/components/atoms/heading/heading.html" +
                data-sly-call="${title.heading_h2_template @ headingText=bannerData.title, variant='regular'}" />
            <sly data-sly-test="${bannerData.headingTag != 'h2' && bannerData.headingTag != 'h1'}"
                data-sly-use.title="/apps/commons/components/atoms/heading/heading.html" +
                data-sly-call="${title.heading_h3_template @ headingText=bannerData.title, variant='regular'}" />
        </div>
        <div class="pw-banner__content__description" auto_locator ="bannerDescription">${bannerData.text @ context='html'}</div>
        <a data-sly-test="${bannerData.link.linkText}" href="${bannerData.link.linkUrl}"
            class="tpatom-link tpatom-link--${bannerData.pwButtonTheme == 'secondary' ? 'primary':'transparent'} js-banner-analytics ${bannerData.text ? '' : 'no-desc'}"
            title="${btnTooltip}" data-asset-name="${bannerData.assetName}"
            target="${bannerData.link.linkType == 'internal' ? '_self' : '_blank'}"
            data-link-section="Hero Image_${dataLinkSectionCTAText}" data-link-type="internal"
            data-link-banner-title="${bannerData.title}" data-link-name="${bannerData.link.linkText}"
            data-anchor-type="${dataLinkSectionCTAText}">
            <span class="tpatom-link__text sly-text">${bannerData.link.linkText @ context='html'}</span>
            <span class="nowrap-text">&#8288;<i class="icon ${bannerData.link.linkType == 'external' ? 'icon-External_Link' : (bannerData.link.linkType == 'download' ||  bannerData.link.linkType == 'externalDownload' ? 'icon-Download' : 'icon-Chevron_Right')}"></i></span>
        </a>
        <input type="hidden" class="componentName-banner" name="componentName" value="${resource.name}" />
    </div>

</sly>
