## This ruleset forces https in the end users browser
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteCond %{REQUEST_URI} !^/dispatcher/invalidate.cache
RewriteRule (.*) https://%{SERVER_NAME}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ https://%{HTTP_HOST}$1 [R=301,L]

RewriteCond   %{HTTP_HOST}  '${SUPPLIER_URL}'
RewriteCond   %{REQUEST_URI} ^/
RewriteRule   "^/$" "/content/tetrapak/supplierportal/global/en/dashboard.html" [PT,L]
RewriteRule   "^/robots.txt"  "/content/dam/supplierportal/robots.txt" [PT]
RewriteRule   "^/sitemap.xml" "/content/tetrapak/supplierportal/en.sitemap.xml" [PT,L]
RewriteCond   %{REQUEST_URI} !(.*).nocache*
RewriteCond   %{REQUEST_URI} !^/.*/jcr:content.*$
RewriteCond   "%{REQUEST_URI}" "!\.(jpg|gif|png|css|js|xls|xlsx|doc|docx|pdf|jpeg|mp4|json|css|ico|woff|woff2|ttf|svg|tif|ppt|pptx|xml)$"
RewriteCond   %{HTTP_HOST}  '${SUPPLIER_URL}'
RewriteCond   %{HTTP_COOKIE}##en ^.*lang-code=([^;]+)|##(en)
RewriteRule   "^/(.*).html$" "/content/tetrapak/supplierportal/global/en/$1.%1%2.html" [QSA,PT,L]     
RewriteRule   "^/(.*)$" "/content/tetrapak/supplierportal/global/en/$1.html" [PT,L]

<LocationMatch "/content/tetrapak/supplierportal/global/en*">
ErrorDocument 404 "/error-pages/404"
ErrorDocument 500 "/error-pages/500"
ErrorDocument 403 "/error-pages/403"
ErrorDocument 400 "/error-pages/400"
</LocationMatch>
