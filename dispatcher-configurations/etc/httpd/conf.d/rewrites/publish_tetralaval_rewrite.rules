## This ruleset forces https in the end users browser
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteCond %{REQUEST_URI} !^/dispatcher/invalidate.cache
RewriteRule (.*) https://%{SERVER_NAME}%{REQUEST_URI} [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)/$ https://%{HTTP_HOST}$1 [R=301,L]

RewriteCond   %{HTTP_HOST}  '${TETRALAVAL_URL}'
RewriteCond   %{REQUEST_URI} ^/
RewriteRule   "^/$" "/content/tetralaval/global/en/home.html" [PT,L]
RewriteRule   "^/robots.txt"  "/content/dam/tetra-laval/robots.txt" [PT]
RewriteRule   "^/sitemap.xml" "/content/tetralaval/global/en.sitemap.xml" [PT,L]
RewriteCond %{REQUEST_URI} !^/.*/jcr:content.*$
RewriteCond   "%{REQUEST_URI}" "!\.(jpg|gif|png|css|js|xls|xlsx|doc|docx|pdf|jpeg|mp4|json|css|ico|woff|woff2|ttf|svg|tif|ppt|pptx|xml)$"
RewriteCond   %{HTTP_HOST}  '${TETRALAVAL_URL}'
RewriteRule   "^/(.*)$" "/content/tetralaval/global/en/$1.html" [PT,L]

<LocationMatch "/content/tetralaval/global/en*">
ErrorDocument 404 "/error/404"
ErrorDocument 500 "/error/500"
ErrorDocument 403 "/error/403"
</LocationMatch>
