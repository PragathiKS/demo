{
  "appFolder": "app",
  "sourceFolder": "source",
  "publishFolder": "app/jcr_root/etc/designs/publicweb/clientlibs",
  "demoFolder": "source/clientlib-format/etc/designs/publicweb/clientlibs",
  "assetFolder": "source/assets",
  "server": "http://admin:admin@localhost:4502",
  "aem": {
    "src": {
      "atomPath": "<%= config.source %>/templates/atoms",
      "moleculePath": "<%= config.source %>/templates/molecules",
      "componentPath": "<%= config.source %>/templates/components",
      "content": "<%= config.app %>/jcr_root/content/publicweb-ux/**/.content.xml",
      "contentXML": "<%= config.app %>/jcr_root/**/.content.xml",
      "components": "<%= config.app %>/jcr_root/**/*.{html,xml,txt}",
      "models": "<%= config.app %>/jcr_root/apps/**/*.js",
      "staticassets": "<%= config.app %>/jcr_root/etc/**/*.{js,css}",
      "mediaassets": "<%= config.app %>/jcr_root/**/*.{jpg,mov,png,mp4,svg}",
      "fontassets": "<%= config.app %>/jcr_root/**/*.{otf,eot,ttf,woff}",
      "jsonData": "<%= config.app %>/jcr_root/**/*.json"
    },
    "target": {
      "atomPath": "<%= config.app %>/jcr_root/apps/publicweb/components/atoms",
      "moleculePath": "<%= config.app %>/jcr_root/apps/publicweb/components/molecules",
      "componentPath": "<%= config.app %>/jcr_root/apps/publicweb/components/content"
    },
    "uxContentDescriptor": "publicweb-ux",
    "componentGroup": "publicweb",
    "componentGroupName": "Customer Hub"
  },
  "assemble": {
    "options": {
      "layouts": "*.hbs",
      "layoutdir": "<%= config.source %>/templates/layouts",
      "data": [
        "<%= config.source %>/data/*.{json,yml}",
        "<%= config.source %>/templates/components/{,*/}*.json"
      ],
      "partials": [
        "<%= config.source %>/templates/components/{,*/}*.hbs"
      ],
      "collections": [
        {
          "name": "components",
          "inflection": "component",
          "sortorder": "ascending",
          "sortby": "datetime"
        }
      ],
      "helpers": [
        "<%= config.source %>/helpers/*"
      ],
      "plugins": [
        "grunt-tasks/assemble-aem-plugin.js"
      ]
    },
    "pages": {
      "options": {
        "aemuxlib": {
          "contentRoot": "<%= config.app %>/jcr_root/content/publicweb-ux",
          "designJcrPath": "/etc/designs/publicweb",
          "jcrFileRoot": "<%= config.app %>/jcr_root/",
          "wrapJsonData": true
        }
      },
      "files": [
        {
          "expand": true,
          "src": [
            "<%= config.source %>/templates/components/**/**/**/*.hbs"
          ],
          "dest": "<%= config.app %>/jcr_root/apps/publicweb/components/content"
        }
      ]
    }
  },
  "copy": {
    "uxlibdemo": [
      {
        "expand": true,
        "dot": true,
        "cwd": "<%= config.source %>/clientlib-format",
        "src": [
          "etc/designs/**"
        ],
        "dest": "<%= config.app %>/jcr_root/"
      }
    ],
    "jsonData": [
      {
        "expand": true,
        "flatten": true,
        "cwd": "<%= config.source %>/templates/components/",
        "src": [
          "**/data/*.json"
        ],
        "dest": "<%= config.app %>/jcr_root/etc/designs/publicweb/jsonData"
      }
    ]
  },
  "webfont": {
    "src": "<%= config.source %>/assets/icons/*.svg",
    "target": "<%= config.source %>/clientlib-format/etc/designs/publicweb/clientlibs/vendor.publish/iconfonts",
    "scss": {
      "target": "<%= config.source %>/assets/styles/common"
    },
    "fontFile": "publicweb-icons",
    "relativePath": "../iconfonts"
  },
  "webpack": {
    "filePath": "etc/designs/publicweb/clientlibs/[name].publish/js/[name].js",
    "chunkFilePath": "etc/designs/publicweb/clientlibs/[name].publish/js/[name].[chunkhash].js",
    "root": "app/jcr_root",
    "modes": {
      "dev": "development",
      "prod": "production"
    },
    "entry": {
      "global": "source/scripts/core/core.js"
    },
    "cacheGroups": {
      "vendor": {
        "test": "[\\\\/]node_modules[\\\\/]|[\\\\/]vendor\\.scss",
        "name": "vendor",
        "minSize": 0,
        "chunks": "all"
      },
      "common": {
        "testMultiple": true,
        "name": "common",
        "minSize": 0,
        "chunks": "all"
      },
      "default_en": {
        "test": "[\\\\/]default[\\\\/]en[\\\\/]base.scss",
        "name": "default.en",
        "enforce": true,
        "chunks": "all"
      }
    },
    "componentGroups": {
      "common": [
        "source/scripts/common/",
        "source/scripts/utils/",
        "source/templates/components/HelloWorld/",
        "source/templates/components/HelloWorldHandlebars/",
        "source/templates/components/OrderStatus/"
      ]
    },
    "handlebars": {
      "helpersFolder": "source/scripts/helpers",
      "commonHelpersFolder": "../../../tetrapak-commons/ui.dev/src/source/scripts/helpers",
      "currentRelativeFolder": "source/templates-hbs",
      "commonRelativeFolder": "../../../tetrapak-commons/ui.dev/src/source/templates-hbs"
    },
    "fonts": {
      "fontPath": "etc/designs/commons/clientlibs/global.publish/fonts"
    },
    "clean": "app",
    "cssPath": "etc/designs/publicweb/clientlibs/[name].publish/css/[name].css",
    "cssChunkPath": "etc/designs/publicweb/clientlibs/[name].publish/css/[name].css"
  },
  "clientlibs": {
    "vendor": {
      "js": "app/jcr_root/etc/designs/publicweb/clientlibs/vendor.publish/js"
    },
    "global": {
      "js": "app/jcr_root/etc/designs/publicweb/clientlibs/global.publish/js"
    },
    "common": {
      "js": "app/jcr_root/etc/designs/publicweb/clientlibs/common.publish/js"
    },
    "default.en": {
      "js": "app/jcr_root/etc/designs/publicweb/clientlibs/default.en.publish/js"
    }
  },
  "createComponent": {
    "componentsFolder": "source/templates/components",
    "atomsFolder": "source/templates/atoms",
    "moleculesFolder": "source/templates/molecules",
    "importsTemplate": "ccTemplates/jsModuleImportTmp.txt",
    "componentTemplate": "ccTemplates/classTmp.txt",
    "pageTemplate": "ccTemplates/pageTmp.txt",
    "importsJsFile": "source/scripts/bundle/imports.js"
  },
  "watch": {
    "assemble": {
      "files": [
        "<%= config.source %>/templates/components/**/*.hbs",
        "<%= config.source %>/templates/layouts/**/*.hbs",
        "<%= config.source %>/templates/components/**/*.json"
      ],
      "tasks": [
        "assemble",
        "copy:jsonData",
        "aemdeploy:components",
        "aemdeploy:models",
        "aemdeploy:jsonData"
      ]
    },
    "static": {
      "files": [
        "<%= config.source %>/scripts/**/*.js",
        "<%= config.source %>/templates/**/*.js",
        "<%= config.source %>/styles/*.scss",
        "<%= config.source %>/templates/components/**/*.scss"
      ],
      "tasks": [
        "shell:lintingDev",
        "shell:webpackDev",
        "shell:removeChunkHash",
        "copy:uxlibdemo",
        "copy:jsonData",
        "assemble",
        "aemcomponentcopy:uxlib",
        "aemdeploy"
      ]
    },
    "aem": {
      "files": [
        "<%= config.source %>/templates/components/**/*.html"
      ],
      "tasks": [
        "aemcomponentcopy:uxlib",
        "aemdeploy:components"
      ]
    }
  }
}
